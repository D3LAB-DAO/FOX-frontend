import{_ as T,B as r,p as m,g as k,c as O,a as _,b as S,d as F,o as l,e as a,f as v,h as t,w as u,v as V,i as f,j as p,k as W,l as h,m as L,n as E,q as R,r as A,s as X,t as D,u as g,x as b,y as w,z as H,A as x,C as y,D as C}from"./index.e03229f4.js";import"https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js";const B={data(){return{connected:!1,approval_foxs:!1,approval_fox:!1,cdp:"",foxs:r.from("0"),weth:r.from("0"),ltv:0,fox_format:"",weth_format:"",foxs_format:""}},computed:{formattedWETH:{get(){return this.weth_format===""?"":this.weth_format},set(o){let e=o.toString();this.weth_format=e,e===""&&(e="0"),this.weth=m(e,"ether")}},formattedLTV:{get(){return this.ltv===""?"":+(this.ltv/100).toFixed(2)},set(o){this.ltv=+(+o.toFixed(2)*100).toFixed(2)}},formattedFOXS:{get(){return this.foxs_format===""?"":this.foxs_format},set(o){let e=o.toString();this.foxs_format=e,e===""&&(e="0"),this.foxs=m(e,"ether")}}},mounted(){this.emitter.on("metamask-connect-event",o=>{this.connected=o,this.connected&&this.checkAllowance()}),p()!==""&&(this.connected=!0),this.checkAllowance()},methods:{checkAllowance:function(){k("FOXS").then(o=>{o!=0&&(this.approval_foxs=!0,k("FOX").then(e=>{e!=0&&(this.approval_fox=!0)}))})},connectOnClick:function(){console.log("connected : ",this.connected),!(p()!==""||this.connected)&&O().then(o=>{o?(console.log("metamask successfully connected!"),this.emitter.emit("metamask-connect-event",!0)):(console.log("metamask connection failed!"),this.emitter.emit("metamask-connect-event",!1))})},approveOnClick:function(){console.log("approveOnClick (approval_foxs) : ",this.approval_foxs),this.approval_foxs?this.approval_fox||(this.emitter.emit("loading-event",!0),_("FOX").then(o=>{this.emitter.emit("loading-event",!1),o?this.approval_fox=!0:this.approval_fox=!1})):(this.emitter.emit("loading-event",!0),_("FOXS").then(o=>{this.emitter.emit("loading-event",!1),o?this.approval_foxs=!0:this.approval_foxs=!1}))},buybackOnClick:function(){this.emitter.emit("loading-event",!0),S(this.cdp,this.foxs).then(o=>{this.emitter.emit("loading-event",!1),console.log(o?"buyback success!":"buyback failed!")})},changeCDP:function(){},inputFOXS:function(){F(this.cdp,this.foxs,this.ltv).then(o=>{this.weth=o})},inputLTV:function(){this.inputFOXS()}}},P={class:"uk-width-1-1"},z={key:0,class:"wallet-outer uk-width-1-1"},M=t("div",{class:"wallet-inner"},[t("span",{"uk-icon":"icon: more; ratio: 3"}),t("p",null,"Please connect to wallet")],-1),U=[M],N={class:"uk-width-1-1"},I=t("hr",null,null,-1),G={class:"uk-inline form-icon"},j={"uk-form-custom":"target: > button > span:first-child",style:{"padding-left":"0px","padding-right":"0px"}},q=t("a",{class:"uk-form-icon uk-form-icon-flip input-form-icon"},[t("span",null,"CDP#")],-1),J=E('<option value="">Please select...</option><option value="0">CDP #0</option><option value="1">CDP #1</option><option value="2">CDP #2</option><option value="3">CDP #3</option>',5),K=[J],Q=t("button",{class:"uk-button uk-button-grey form-button uk-form-width-medium uk-form-large uk-text-left",type:"button",tabindex:"-1",style:{"max-width":"100%"}},[t("span"),t("span",{"uk-icon":"icon: chevron-down",style:{float:"right",position:"relative",right:"95px",top:"17px"}})],-1),Y=t("div",{class:"wrap"},[t("span",{class:"icon-circle","uk-icon":"icon: arrow-down; ratio: 1.5;"})],-1),Z={class:"uk-inline form-icon"},$=t("a",{class:"uk-form-icon uk-form-icon-flip input-form-icon"},[t("img",{src:W,style:{width:"20px"}}),t("span",null,"FOXS")],-1),tt=t("hr",{class:"custom-divider-vertical"},null,-1),et=t("div",{class:"description"},[t("span",{style:{"font-weight":"bold"}},"EXCHANGE RATES"),t("br"),h(" USDC: $1.000"),t("br"),h(" FXS: $6.015"),t("br"),h(" FRAX 0.3000% "),t("br"),h(" SWAP FEE (0.00000 USDC) ")],-1),ot=t("div",{class:"wrap"},[t("span",{class:"icon-circle","uk-icon":"icon: arrow-down; ratio: 1.5;"})],-1),nt={class:"uk-inline form-icon"},st=t("a",{class:"uk-form-icon uk-form-icon-flip input-form-icon"},[t("img",{src:L,style:{width:"20px"}}),t("span",null,"BNB")],-1),it={class:"wrap"},lt={class:"uk-inline"},at=t("a",{class:"uk-form-icon uk-form-icon-flip input-form-icon"},[t("span",null,"LTV(%)")],-1),rt=t("div",{class:"description"},[t("span",{style:{"font-weight":"bold"}},"EXCHANGE RATES"),h("USDC: $1.000 ")],-1),ct=t("hr",null,null,-1),ut={key:0},dt={key:1},ht={key:0},ft={key:1},mt={key:2};function pt(o,e,c,d,i,s){return l(),a("div",P,[i.connected?v("",!0):(l(),a("div",z,U)),t("div",N,[I,t("div",G,[t("div",j,[q,u(t("select",{"onUpdate:modelValue":e[0]||(e[0]=n=>i.cdp=n),"aria-label":"Custom controls",class:"form-button uk-form-width-medium uk-form-large",onChange:e[1]||(e[1]=(...n)=>s.changeCDP&&s.changeCDP(...n))},K,544),[[V,i.cdp]]),Q])]),Y,t("div",Z,[$,u(t("input",{class:"uk-input input-form uk-form-width-medium uk-form-large",type:"number","onUpdate:modelValue":e[2]||(e[2]=n=>s.formattedFOXS=n),onInput:e[3]||(e[3]=(...n)=>s.inputFOXS&&s.inputFOXS(...n))},null,544),[[f,s.formattedFOXS]])]),tt,et,ot,t("div",nt,[st,u(t("input",{readonly:"",class:"uk-input result-form uk-form-width-medium uk-form-large",type:"number","onUpdate:modelValue":e[4]||(e[4]=n=>s.formattedWETH=n)},null,512),[[f,s.formattedWETH]])]),t("div",it,[t("div",lt,[at,u(t("input",{class:"uk-input input-form uk-form-width-medium uk-form-large",type:"number","onUpdate:modelValue":e[5]||(e[5]=n=>s.formattedLTV=n),onInput:e[6]||(e[6]=(...n)=>s.inputLTV&&s.inputLTV(...n))},null,544),[[f,s.formattedLTV]])])]),rt,ct,i.approval_foxs&&i.approval_fox?(l(),a("div",ut,[t("button",{class:"uk-button uk-button-default uk-button-large form-button",onClick:e[7]||(e[7]=(...n)=>s.buybackOnClick&&s.buybackOnClick(...n))}," Buyback ")])):i.connected?(l(),a("div",dt,[t("button",{class:"uk-button uk-button-default uk-button-large form-button",onClick:e[8]||(e[8]=(...n)=>s.approveOnClick&&s.approveOnClick(...n))},[i.approval_foxs?i.approval_fox?v("",!0):(l(),a("span",ft,"Approve(FOX)")):(l(),a("span",ht,"Approve(FOXS)"))])])):(l(),a("div",mt,[t("button",{class:"uk-button uk-button-default uk-button-large form-button",onClick:e[9]||(e[9]=(...n)=>s.connectOnClick&&s.connectOnClick(...n))}," Connect Wallet ")]))])])}const kt=T(B,[["render",pt]]),_t={data(){return{connected:!1,approval_weth:!1,cdp:"",weth:r.from("0"),ltv:0,foxs:r.from("0"),weth_format:"",foxs_format:"",bWethWrongRange:!1,bLtvWrongRange:!1,trustLevel:0,maxLTV:0}},computed:{formattedWETH:{get(){return this.weth_format===""?"":this.weth_format},set(o){let e=o.toString();this.weth_format=e,e===""&&(e="0"),this.weth=m(e,"ether"),this.checkRange()}},formattedLTV:{get(){return this.ltv===""?"":+(this.ltv/100).toFixed(2)},set(o){console.log("set ltv!!",o),this.ltv=+(+o.toFixed(2)*100).toFixed(2),this.checkRange()}},formattedFOXS:{get(){return this.foxs_format===""?"":this.foxs_format},set(o){let e=o.toString();this.foxs_format=e,e===""&&(e="0"),this.foxs=m(e,"ether")}}},mounted(){this.emitter.on("metamask-connect-event",o=>{this.connected=o,this.connected&&this.checkAllowance()}),p()!==""&&(this.connected=!0),this.updateValues(),this.checkAllowance()},methods:{checkAllowance:function(){k("WETH").then(o=>{o!=0&&(this.approval_weth=!0)})},updateValues:function(){R().then(o=>{this.trustLevel=+(o/100).toFixed(2)}),A().then(o=>{this.maxLTV=+(o/100).toFixed(2)})},connectOnClick:function(){console.log("connected : ",this.connected),!(p()!==""||this.connected)&&O().then(o=>{o?(console.log("metamask successfully connected!"),this.emitter.emit("metamask-connect-event",!0)):(console.log("metamask connection failed!"),this.emitter.emit("metamask-connect-event",!1))})},approveOnClick:function(){this.approval_weth||(this.emitter.emit("loading-event",!0),_("WETH").then(o=>{this.emitter.emit("loading-event",!1),o?this.approval_weth=!0:this.approval_weth=!1}))},RecollateralizeOnClick:function(){this.emitter.emit("loading-event",!0),X(this.cdp,this.weth,this.ltv).then(o=>{this.emitter.emit("loading-event",!1),console.log(o?"recollateralize success!":"recollateralize failed!")})},changeCDP:function(){D(this.cdp).then(o=>{this.setWETH(o.collateralAmount_),this.ltv=o.ltv_,this.setFOXS(o.shareAmount_)})},setWETH:function(o){this.weth=r.from(o),this.weth_format=g(r.from(o))},setFOXS:function(o){this.foxs=r.from(o),this.foxs_format=g(r.from(o))},updateMaxWethOnClick:async function(){this.updateMaxWETH().then(o=>{this.inputWETH()})},updateMaxLtvOnClick:async function(){this.updateMaxLTV().then(o=>{this.inputLTV()})},updateMaxWETH:async function(){return b(this.cdp,this.ltv).then(o=>{this.setWETH(o.upperBound_)})},updateMaxLTV:async function(){return w(this.cdp,this.weth).then(o=>{this.ltv=o.upperBound_})},inputWETH:async function(o){this.updateFoxs().then(e=>{this.checkRange(o)})},inputLTV:async function(o){this.inputWETH(o)},updateFoxs:async function(){return H(this.cdp,this.weth,this.ltv).then(o=>{console.log("getShareAmountInRecollateralize",o),this.setFOXS(r.from(o))})},checkRange:async function(o){b(this.cdp,this.ltv).then(e=>{let c=r.from(e.upperBound_),d=r.from(e.lowerBound_);this.bWethWrongRange=o!==void 0&&parseInt(o.target.value)<0||this.weth.gt(c)||this.weth.lt(d),console.log(this.bWethWrongRange,"WETH RANGE!!! ",c,d)}),w(this.cdp,this.weth).then(e=>{let c=e.upperBound_,d=e.lowerBound_;this.bLtvWrongRange=o!==void 0&&parseInt(o.target.value)<0||this.ltv>c||this.ltv<d,console.log(this.bLtvWrongRange,"LTV RANGE!!! ",c,d,this.ltv)})}}},vt={class:"uk-width-1-1"},gt={key:0,class:"wallet-outer uk-width-1-1"},bt=t("div",{class:"wallet-inner"},[t("span",{"uk-icon":"icon: more; ratio: 3"}),t("p",null,"Please connect to wallet")],-1),wt=[bt],xt={class:"uk-width-1-1"},yt=t("hr",null,null,-1),Ct={class:"uk-inline form-icon"},Tt={"uk-form-custom":"target: > button > span:first-child",style:{"padding-left":"0px","padding-right":"0px"}},Ot=t("a",{class:"uk-form-icon uk-form-icon-flip input-form-icon"},[t("span",null,"CDP#")],-1),Vt=E('<option value="">Please select...</option><option value="0">CDP #0</option><option value="1">CDP #1</option><option value="2">CDP #2</option><option value="3">CDP #3</option>',5),Wt=[Vt],Lt=t("button",{class:"uk-button uk-button-grey form-button uk-form-width-medium uk-form-large uk-text-left",type:"button",tabindex:"-1",style:{"max-width":"100%"}},[t("span"),t("span",{"uk-icon":"icon: chevron-down",style:{float:"right",position:"relative",right:"95px",top:"17px"}})],-1),Et=t("div",{class:"wrap"},[t("span",{class:"icon-circle","uk-icon":"icon: arrow-down; ratio: 2;",style:{"margin-left":"-1px"}})],-1),St={class:"uk-inline form-icon"},Ft=t("img",{src:L,style:{width:"20px"}},null,-1),Rt=t("span",null,"WETH",-1),At=[Ft,Rt],Xt=["disabled"],Dt={class:"wrap"},Ht={class:"uk-inline"},Bt=t("span",null,"LTV(%)",-1),Pt=[Bt],zt=["disabled"],Mt={key:0,class:"description"},Ut=t("span",{style:{"font-weight":"bold",color:"red"}},"WRONG VALUE!",-1),Nt=[Ut],It={key:1,class:"description"},Gt=t("span",{style:{"font-weight":"bold"}},"MAX LTV:",-1),jt=t("hr",{class:"custom-divider-vertical"},null,-1),qt={class:"description"},Jt=t("span",{style:{"font-weight":"bold"}},"TRUST LEVEL:",-1),Kt=t("div",{class:"wrap"},[t("span",{class:"icon-circle","uk-icon":"icon: arrow-down; ratio: 2;",style:{"margin-left":"-1px"}})],-1),Qt={class:"uk-inline form-icon"},Yt=t("a",{class:"uk-form-icon uk-form-icon-flip input-form-icon"},[t("img",{src:W,style:{width:"20px"}}),t("span",null,"FOXS")],-1),Zt=t("hr",null,null,-1),$t={key:2},te={key:3},ee={key:4};function oe(o,e,c,d,i,s){return l(),a("div",vt,[i.connected?v("",!0):(l(),a("div",gt,wt)),t("div",xt,[yt,t("div",Ct,[t("div",Tt,[Ot,u(t("select",{"onUpdate:modelValue":e[0]||(e[0]=n=>i.cdp=n),"aria-label":"Custom controls",class:"form-button uk-form-width-medium uk-form-large",onChange:e[1]||(e[1]=(...n)=>s.changeCDP&&s.changeCDP(...n))},Wt,544),[[V,i.cdp]]),Lt])]),Et,t("div",St,[t("a",{class:"uk-form-icon uk-form-icon-flip input-form-icon",onClick:e[2]||(e[2]=n=>s.updateMaxWethOnClick())},At),u(t("input",{class:x(["uk-input input-form uk-form-width-medium uk-form-large",{wrong:i.bWethWrongRange}]),type:"number",min:"0","onUpdate:modelValue":e[3]||(e[3]=n=>s.formattedWETH=n),onInput:e[4]||(e[4]=n=>s.inputWETH(n)),disabled:i.cdp===""},null,42,Xt),[[f,s.formattedWETH]])]),t("div",Dt,[t("div",Ht,[t("a",{class:"uk-form-icon uk-form-icon-flip input-form-icon",onClick:e[5]||(e[5]=n=>s.updateMaxLtvOnClick())},Pt),u(t("input",{class:x(["uk-input input-form uk-form-width-medium uk-form-large",{wrong:i.bLtvWrongRange}]),type:"number","onUpdate:modelValue":e[6]||(e[6]=n=>s.formattedLTV=n),onInput:e[7]||(e[7]=n=>s.inputLTV(n)),disabled:i.cdp===""},null,42,zt),[[f,s.formattedLTV]])])]),i.bWethWrongRange||i.bLtvWrongRange?(l(),a("div",Mt,Nt)):(l(),a("div",It,[Gt,h(" "+y(this.maxLTV)+"% ",1)])),jt,t("div",qt,[Jt,h(" "+y(this.trustLevel)+"% ",1)]),Kt,t("div",Qt,[Yt,u(t("input",{readonly:"",class:"uk-input result-form uk-form-width-medium uk-form-large",type:"number","onUpdate:modelValue":e[8]||(e[8]=n=>s.formattedFOXS=n)},null,512),[[f,s.formattedFOXS]])]),Zt,i.approval_weth?(l(),a("div",$t,[t("button",{class:"uk-button uk-button-default uk-button-large form-button",onClick:e[9]||(e[9]=(...n)=>s.RecollateralizeOnClick&&s.RecollateralizeOnClick(...n))}," Recollateralize ")])):i.connected?(l(),a("div",te,[t("button",{class:"uk-button uk-button-default uk-button-large form-button",onClick:e[10]||(e[10]=(...n)=>s.approveOnClick&&s.approveOnClick(...n))}," Approve(WETH) ")])):(l(),a("div",ee,[t("button",{class:"uk-button uk-button-default uk-button-large form-button",onClick:e[11]||(e[11]=(...n)=>s.connectOnClick&&s.connectOnClick(...n))}," Connect Wallet ")]))])])}const ne=T(_t,[["render",oe]]),se={class:"width-1-1-medium"},ie={class:"uk-card uk-card-default"},le=t("ul",{class:"uk-flex-center","uk-tab":"","data-uk-tab":"{connect:'#buyback-tab-contents'}"},[t("li",{class:"uk-active"},[t("a",null,"Buyback")]),t("li",null,[t("a",null,"Recollateralize")])],-1),ae={id:"buyback-tab-contents",class:"uk-switcher"},ue={__name:"BuybackView",setup(o){return(e,c)=>(l(),a("div",se,[t("div",ie,[t("div",null,[le,t("ul",ae,[t("li",null,[C(kt)]),t("li",null,[C(ne)])])])])]))}};export{ue as default};
